<!DOCTYPE html>
<html lang="it" class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; script-src 'self' 'unsafe-inline' https://unpkg.com; connect-src 'self';"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Step Unit – Underground Clubbing</title>
    <meta name="description" content="Step Unit porta il clubbing underground in spazi non convenzionali." />
    <!-- performance enhancement -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />

    <style>
      :root {
        --col-left: #00ff6a; /* neon green */
        --col-right: #b200ff; /* electric purple */
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        color: #fff;
        font-family: "Inter", sans-serif;
      }
      body {
        background: #000;
        overflow: hidden;
      }
      main {
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        position: relative;
        pointer-events: none;
      }
      h1 {
        font-size: 6rem;
        line-height: 1;
        position: relative;
        text-transform: uppercase;
        user-select: none;
      }
      h1 .layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        pointer-events: none;
        mix-blend-mode: screen;
      }
      h1 .layer.left {
        color: var(--col-left);
        transform: translateX(calc(var(--mx, 0px) * -0.04));
      }
      h1 .layer.right {
        color: var(--col-right);
        transform: translateX(calc(var(--mx, 0px) * 0.04));
      }
      h1 .text {
        position: relative;
      }
      p {
        font-size: 1.2rem;
        max-width: 40ch;
        margin-top: 1.5rem;
        pointer-events: auto;
      }
      canvas#scene {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }
      @media (max-width: 600px) {
        h1 {
          font-size: 3rem;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="scene" aria-hidden="true"></canvas>
    <main>
      <h1 id="title">
        <span class="text">STEP UNIT</span>
        <span class="layer left">STEP UNIT</span>
        <span class="layer right">STEP UNIT</span>
      </h1>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.
        Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies
        sed, dolor.
      </p>
    </main>

    <script type="module">
      /* ===== PARALLAX / RGB SPLIT ===== */
      const title = document.getElementById("title");
      const rootStyle = document.documentElement.style;
      window.addEventListener("pointermove", (e) => {
        const { innerWidth: w, innerHeight: h } = window;
        const mx = e.clientX - w / 2;
        const my = e.clientY - h / 2;
        rootStyle.setProperty("--mx", mx + "px");
        rootStyle.setProperty("--my", my + "px");
      });

      /* ===== THREE.JS SPEAKER SCENE ===== */
      import * as THREE from "https://unpkg.com/three@0.159.0/build/three.module.js";

      const canvas = document.getElementById("scene");
      const renderer = new THREE.WebGLRenderer({
        canvas,
        alpha: true,
        antialias: true,
      });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      const scene = new THREE.Scene();

      const camera = new THREE.PerspectiveCamera(
        35,
        window.innerWidth / window.innerHeight,
        0.1,
        100
      );
      camera.position.set(0, 0, 14);
      scene.add(camera);

      const ambient = new THREE.AmbientLight(0xffffff, 0.6);
      const directional = new THREE.DirectionalLight(0xffffff, 0.8);
      directional.position.set(5, 5, 5);
      scene.add(ambient, directional);

      function createSpeaker() {
        const group = new THREE.Group();
        const box = new THREE.Mesh(
          new THREE.BoxGeometry(3, 5, 2),
          new THREE.MeshStandardMaterial({
            color: 0x111111,
            roughness: 0.5,
            metalness: 0.3,
          })
        );
        group.add(box);

        const woofer = new THREE.Mesh(
          new THREE.CylinderGeometry(1.2, 1.2, 0.4, 32),
          new THREE.MeshStandardMaterial({
            color: 0x333333,
            metalness: 0.8,
            roughness: 0.2,
          })
        );
        woofer.rotation.x = Math.PI / 2;
        woofer.position.z = 1.01;
        group.add(woofer);

        const tweeter = new THREE.Mesh(
          new THREE.CylinderGeometry(0.5, 0.5, 0.3, 32),
          new THREE.MeshStandardMaterial({
            color: 0x555555,
            metalness: 0.7,
            roughness: 0.1,
          })
        );
        tweeter.rotation.x = Math.PI / 2;
        tweeter.position.set(0, 1.3, 1.05);
        group.add(tweeter);

        return group;
      }

      const leftSpeaker = createSpeaker();
      leftSpeaker.position.set(-6, 0, 0);
      leftSpeaker.rotation.y = Math.PI * 0.15;
      scene.add(leftSpeaker);

      const rightSpeaker = createSpeaker();
      rightSpeaker.position.set(6, 0, 0);
      rightSpeaker.rotation.y = -Math.PI * 0.15;
      scene.add(rightSpeaker);

      function onResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }
      window.addEventListener("resize", onResize);
      onResize();

      const rotMult = 0.0015;
      function animate() {
        requestAnimationFrame(animate);
        const mx = parseFloat(
          getComputedStyle(document.documentElement).getPropertyValue("--mx") ||
            0
        );
        leftSpeaker.rotation.y = Math.PI * 0.15 + rotMult * mx;
        rightSpeaker.rotation.y = -Math.PI * 0.15 + rotMult * mx;
        renderer.render(scene, camera);
      }
      animate();
    </script>
  </body>
</html>
